{"ast":null,"code":"import { applyMiddleware, createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunkMiddleware from 'redux-thunk';\nimport { rootReducer } from '../reducers'; //import storage from 'redux-persist/lib/storage';\n//import { persistStore, persistReducer } from 'redux-persist';\n\nlet preloadedState;\nconst persistedTodosString = localStorage.getItem('state');\n\nconst saveLocal = ({\n  getState\n}) => {\n  return next => action => {\n    const result = next(action); //console.log('Middleware', getState().state);\n    //localStorage.setItem('state', JSON.stringify(getState().state));\n\n    localStorage.removeItem('state');\n    return result;\n  };\n};\n\nlocalStorage.removeItem('state'); //console.log(JSON.stringify(persistedTodosString))\n\nif (persistedTodosString) {\n  preloadedState = JSON.parse(persistedTodosString);\n}\n\nexport const store = createStore(rootReducer, preloadedState, composeWithDevTools(applyMiddleware(saveLocal, thunkMiddleware)));\n/* const persistConfig = {\r\n    key: 'root',\r\n    storage,\r\n}\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\nconst persistorStore = createStore(persistedReducer, composeWithDevTools(applyMiddleware(thunkMiddleware)));\r\nexport const store = persistStore(persistorStore); */","map":{"version":3,"sources":["D:/Apache/Apache24/htdocs/Server/React/DemoProject/demo/src/store/index.js"],"names":["applyMiddleware","createStore","composeWithDevTools","thunkMiddleware","rootReducer","preloadedState","persistedTodosString","localStorage","getItem","saveLocal","getState","next","action","result","removeItem","JSON","parse","store"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,WAA1B,QAA6C,OAA7C;AACA,SAASC,mBAAT,QAAoC,0BAApC;AACA,OAAOC,eAAP,MAA4B,aAA5B;AACA,SAASC,WAAT,QAA4B,aAA5B,C,CACA;AACA;;AAEA,IAAIC,cAAJ;AACA,MAAMC,oBAAoB,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA7B;;AAEA,MAAMC,SAAS,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AAChC,SAAQC,IAAD,IAAWC,MAAD,IAAY;AAC3B,UAAMC,MAAM,GAAGF,IAAI,CAACC,MAAD,CAAnB,CAD2B,CAE3B;AACA;;AACAL,IAAAA,YAAY,CAACO,UAAb,CAAwB,OAAxB;AACA,WAAOD,MAAP;AACD,GAND;AAOD,CARD;;AAUAN,YAAY,CAACO,UAAb,CAAwB,OAAxB,E,CAEA;;AAEA,IAAIR,oBAAJ,EAA0B;AACxBD,EAAAA,cAAc,GAAGU,IAAI,CAACC,KAAL,CAAWV,oBAAX,CAAjB;AACD;;AAED,OAAO,MAAMW,KAAK,GAAGhB,WAAW,CAACG,WAAD,EAAcC,cAAd,EAA8BH,mBAAmB,CAACF,eAAe,CAACS,SAAD,EAAYN,eAAZ,CAAhB,CAAjD,CAAzB;AAEP;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { applyMiddleware, createStore } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { rootReducer } from '../reducers'\r\n//import storage from 'redux-persist/lib/storage';\r\n//import { persistStore, persistReducer } from 'redux-persist';\r\n\r\nlet preloadedState;\r\nconst persistedTodosString = localStorage.getItem('state');\r\n\r\nconst saveLocal = ({getState}) => {\r\n  return (next) => (action) => {\r\n    const result = next(action);\r\n    //console.log('Middleware', getState().state);\r\n    //localStorage.setItem('state', JSON.stringify(getState().state));\r\n    localStorage.removeItem('state');\r\n    return result;\r\n  };\r\n}\r\n\r\nlocalStorage.removeItem('state');\r\n\r\n//console.log(JSON.stringify(persistedTodosString))\r\n\r\nif (persistedTodosString) {\r\n  preloadedState = JSON.parse(persistedTodosString)\r\n}\r\n\r\nexport const store = createStore(rootReducer, preloadedState, composeWithDevTools(applyMiddleware(saveLocal, thunkMiddleware)));\r\n\r\n/* const persistConfig = {\r\n    key: 'root',\r\n    storage,\r\n}\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\nconst persistorStore = createStore(persistedReducer, composeWithDevTools(applyMiddleware(thunkMiddleware)));\r\nexport const store = persistStore(persistorStore); */\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}